<!DOCTYPE html>

  {% load static %}
  
  <html lang="en" dir="ltr">
    <head>
      <title>NRGY Admin</title>
      {% include 'style.html' %}
    </head>
  
  <body>
      <!-- Header HTML -->
      {% include 'head.html' %}
      <style>
        h1{
          text-align: center;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100px;
        }
        h4{
          text-align: center;
          margin: 1% 0;
        }
        th{
          text-align: center;
        }
        td{
          text-align: center;
        }
        table{
          width: 80%;
        }
      </style>
        <!-- Alertes en fonction des actions utilisateurs -->
        <div>
          {% if messages %}
              {% for message in messages %}
                {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
                  <div class="alert alert-success"><strong>{{ message }}</strong></div>
                {% elif message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
                  <div class="alert alert-warning"><strong>{{ message }}</strong></div>
                {% else %}
                  <div class="alert alert-danger"><strong>{{ message }}</strong></div>
                {% endif %}
              {% endfor %}
          {% endif %}
      </div>
      <h1 class="title">Journal :</h1>
      <form method="post" >
        {% csrf_token %}
        <div class="container">
          <div class="row">
            <div class="col-sm">
              <h4>Device</h4>
              <select name ='name' id='select' class="form-control">
              </select>
            </div>
            <div class="col-sm">
              <h4>From</h4>
              <input class="form-control" type="datetime-local" name='date_from'> 
            </div>
            <div class="col-sm">
              <h4>To</h4>
              <input class="form-control" type="datetime-local"  name='date_to'>
            </div>
          </div>
          <div class="row">
            <div class="col-sm">
              <h4>Type de message</h4>
              <select name='type_message' class="form-control">
                <option value='0'></option>
                <option value='F1'>Ligne de vie</option> 
                <option value='F3'>Réalisé</option>
                <option value='F4'>Acquittement Programme de marche</option> 
                <option value='F5'>Acquittement Programme hebdomadaire</option> 
                <option value='F6'>Configuration générale</option>
                <option value='F7'>Programme</option>
              </select>
            </div>
            <div class="col-sm">
              <h4>Filter</h4>
              <input class="form-control" type="text"  name='filter_message'>
            </div>
            <div class="col-sm">
              <h4>Nombre de messages</h4>
              <input class="form-control" type="text"  value="15" name='limit'>
            </div>
          </div>
        </div>
        <div class="text-center mx-auto">
          <button class="btn btn--radius-2 btn--blue btn-outline-sitinnov " style="margin-top: 2%;" type="submit">
              <a class="text-decoration-none text-reset" >Valider</a>
          </button>
        </div>
      </form>
      {{ payloads|json_script:'data' }}
      {{ type|json_script:'names' }}
      {{ devices|json_script:'devices' }} 
      {{ type_message|json_script:'type_message' }}
      <script type="text/javascript" src="{% static 'journal.js' %}"></script>
      <script>
        document.addEventListener('DOMContentLoaded', function () {
           var input = document.getElementById('select');
           if (localStorage['name']) { 
               input.value = localStorage['name']; 
           }
           input.onchange = function () {
                localStorage['name'] = this.value;
            }
        });
        </script>
  </body>
  <footer>
      {% include 'footer.html' %}
  </footer>
  
  </html>